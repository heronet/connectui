<div class="container">
  <div *ngIf="chat" class="chat">
    <div class="header">
      <span *ngIf="!titleEditMode" (click)="titleEditMode = !titleEditMode">{{
        chat.title
      }}</span>
      <form
        *ngIf="titleEditMode"
        class="title-edit"
        #titleForm="ngForm"
        (ngSubmit)="changeName(titleForm)"
      >
        <input type="text" name="title" [(ngModel)]="chatTitle" />
        <button type="submit">Done</button>
      </form>
      <span style="flex: 1 1 auto"></span>
      <span>...</span>
    </div>
    <div class="spacer"></div>

    <div
      *ngFor="let message of chat.messages"
      [ngClass]="message.userId === authData?.id ? 'sent' : 'rcvd'"
      class="msg"
      [attr.data-nametime]="message.time | date : 'shortTime'"
    >
      <span>{{ message.text }}</span>
    </div>
    <p *ngIf="chat.messages.length === 0" class="no-msg">Say Hello!</p>
  </div>
  <div class="spacer"></div>

  <div class="message-box-container">
    <form class="message-box" #f="ngForm" (ngSubmit)="sendMessage(f)">
      <textarea
        type="text"
        name="messageText"
        class="message-input"
        placeholder="Type message..."
        autocomplete="off"
        ngModel
        autosize
        rows="1"
      ></textarea>
      <button type="submit" class="message-submit">Send</button>
    </form>
  </div>
</div>
